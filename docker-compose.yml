version: '2'
services:
  rabbitmq:
    image: rabbitmq
    restart: always
  mysql:
    image: mysql
    restart: always
    environment:
      - "MYSQL_ALLOW_EMPTY_PASSWORD=yes"
      - "MYSQL_DATABASE=eq8"
  redis:
    image: redis
    restart: always
  elasticsearch:
    image: elasticsearch
    restart: always
  proxy:
    build: services/proxy
    image: eq8/proxy
    restart: always
    ports:
     - "80:80"
    links:
     - assets
     - gateway
     - logic
  assets:
    build: services/assets
    image: eq8/assets
    restart: always
  gateway:
    build: services/gateway
    image: eq8/gateway
    restart: always
    links:
      - rabbitmq
      - elasticsearch
      - redis
  logic:
    build: services/logic
    image: eq8/logic
    restart: always
    links:
      - rabbitmq
  vcs:
    build: services/vcs
    image: eq8/vcs
    restart: always
    links:
     - mysql
     - rabbitmq
     - redis
  indexer:
    build: services/indexer
    image: eq8/indexer
    restart: always
    links:
     - redis
     - elasticsearch
